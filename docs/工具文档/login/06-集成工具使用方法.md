# 集成工具使用方法（本项目涉及）

## 学习目标
- 熟悉项目中常用的工具链：TypeScript、ESLint、NextAuth、Prisma、npm 脚本。

## 工具清单
- TypeScript：`npm run type-check` 进行类型检查。
- ESLint：`npm run lint` 查看代码风格与可维护性问题。
- 开发服务器：`npm run dev` 启动预览，默认 3000，被占用时切到 3001。
- NextAuth：处理认证（登录/退出/会话）；与中间件配合做受限路由。
- Prisma：数据库 ORM，NextAuth 使用 PrismaAdapter 存储用户/会话数据。

## 使用与调试
- 类型错误修复：
  - 错误示例：`string | null | undefined` 不可赋值到 `string | undefined`。
  - 处理方式：显式合并到 `undefined`，如 `res?.error ?? undefined`。
- Lint 报警：通常是未使用变量或依赖数组不完整；优先修复关键警告，忽略低影响项。
- 预览验证：
  - 首页展示 `AuthStatus`；登录后有一次性提示。
  - 访问 `/back` 未登录会重定向到 `/login`。

## npm 脚本
- `npm run type-check`：调用 `tsc --noEmit`。
- `npm run lint`：运行 ESLint，配置在 `eslint.config.mjs`。
- `npm run dev`：启动 Next.js 开发服务器。

## 常见问题
- `.env` 未配置导致 OAuth 登录失败：检查 `NEXTAUTH_URL`、`NEXTAUTH_SECRET`、GitHub/Google 客户端参数。
- Prisma schema 变更后未迁移：运行 `npx prisma migrate dev` 使数据库结构与模型一致。